<!DOCTYPE html> <html lang=en> <head> <title>Damian Zaremba - Blog</title> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta http-equiv=Content-Type content="text/html; charset=UTF-8"/> <meta name=description content="Damian Zaremba's Blog"/> <meta name=google-site-verification content=qykIg-4DghoGe78ET4eRjKG1cx6n3gXvu4jF0FvcwRo /> <meta name=author content="Damian Zaremba"/> <link rel=alternate type="application/rss+xml" title="Damian Zaremba's Blog" href="http://feeds.feedburner.com/DamianZaremba"/> <meta name=robots content=INDEX /> <meta name=robots content=FOLLOW /> <meta name=robots content="INDEX,FOLLOW"/> <link href="/assests/css/bootstrap.min.css?v1" rel=stylesheet> <link href="/assests/css/main.css?v1" rel=stylesheet> </head> <body> <nav class="navbar navbar-default navbar-fixed-top"> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target="#navbar" aria-expanded=false aria-controls=navbar> <span class=sr-only>Open navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href="/">Damian Zaremba</a> </div> <div id=navbar> <div class="collapse navbar-collapse"> <ul class="nav navbar-nav"> <li class=active><a href="/">Blog</a></li> <li class=""><a href="/about/">About</a></li> <li class=""><a href="/cv/">CV</a></li> <li class=""><a href="/archive/">Archive</a></li> <li class=""><a href="/projects/">Projects</a></li> <li class=""><a href="/todo/">Todo</a></li> </ul> <div class="social-icons navbar-right"> <a href="http://twitter.com/DamianZaremba"> <img class=twitter src="/assests/images/twitter.png?v1" alt=Twitter /> </a> <a href="https://github.com/DamianZaremba"> <img class=github src="/assests/images/github.png?v1" alt=GitHub /> </a> <a href="http://feeds.feedburner.com/DamianZaremba"> <img class=rss src="/assests/images/rss.png?v1" alt=RSS /> </a> </div> </div> </div> </div> </nav> <div class=container> <article class=post> <h1 class=title><a href="/2011/08/install-postgresql-on-cpanel/">Install PostgreSQL on cPanel</a></h1> <div class=meta> <span><img src="/assests/images/date.png" title=Date alt=Date />23 Aug 2011</span> <span><img src="/assests/images/comments.png" title=Content alt=Content /><a href="/2011/08/install-postgresql-on-cpanel/#disqus_thread">Comments</a></span> <ul class=categories> <li><a href='/tag/cpanel'>Cpanel</a></li><li><a href='/tag/knowledge-base'>Knowledge base</a></li><li><a href='/tag/postgresql'>Postgresql</a></li><li><a href='/tag/cpanel'>Cpanel</a></li><li><a href='/tag/hack'>Hack</a></li><li><a href='/tag/pgsql'>Pgsql</a></li><li><a href='/tag/postgresql'>Postgresql</a></li></ul> </div> <div class=entry> <p>To install PostgreSQL on a cPanel server you can perform the following:</p> <ol> <li>Run /scripts/installpostgres</li> <li>Go to SQL services -> Postgre config and click Install config</li> <li>Configure a root password for Postgre 4 Enable Postgre with chkconfig postgres on; service postgres restart</li> </ol> <p>Now you would think that is it, right? Well if you already have users on the box you will now need to add them into postgre otherwise they will have no access.</p> <p>You can add them with the following script:</p> <p><figure class=highlight><pre><code class="language-text" data-lang="text">for user in $(ls /var/cpanel/users);
do
 su postgres -c &quot;createuser -S -D -R $user&quot;;
done</code></pre></figure></p> </div> </article> <article class=post> <h1 class=title><a href="/2011/08/http-basic-authentication-apache/">HTTP basic authentication - Apache</a></h1> <div class=meta> <span><img src="/assests/images/date.png" title=Date alt=Date />23 Aug 2011</span> <span><img src="/assests/images/comments.png" title=Content alt=Content /><a href="/2011/08/http-basic-authentication-apache/#disqus_thread">Comments</a></span> <ul class=categories> <li><a href='/tag/foss'>FOSS</a></li><li><a href='/tag/knowledge-base'>Knowledge base</a></li><li><a href='/tag/apache'>Apache</a></li><li><a href='/tag/authentication'>Authentication</a></li><li><a href='/tag/htaccess'>Htaccess</a></li><li><a href='/tag/http-basic'>Http basic</a></li></ul> </div> <div class=entry> <p>Method 1) Inside the directory you wish to protect include a .htaccess file with the following content:</p> <p><figure class=highlight><pre><code class="language-text" data-lang="text">AuthUserFile /some/secure/path/outside/the/public/docs/.htpasswd
AuthName &quot;My secure area&quot;
AuthType Basic
Require valid-user</code></pre></figure></p> <p>Method 2) In your apache config file add the following:</p> <p><figure class=highlight><pre><code class="language-text" data-lang="text">&lt;Directory /path/to/directory/to/protect/&gt;
 AuthUserFile /some/secure/path/outside/the/public/docs/.htpasswd
 AuthName &quot;My secure area&quot;
 AuthType Basic
 Require valid-user
&lt;/Directory&gt;</code></pre></figure></p> <p>Now you have configured apache for authentication you need to create a password "databases". This is a file in a format apache can understand.</p> <p>You can create it with the htpasswd command:</p> <p><figure class=highlight><pre><code class="language-text" data-lang="text">htpasswd -c /some/secure/path/outside/the/public/docs/.htpasswd myusername</code></pre></figure></p> <p>Once you have your password database, if you need to update a users password or add more users you can use the htpasswd command without the -c option, like so:</p> <p><figure class=highlight><pre><code class="language-text" data-lang="text">htpasswd /some/secure/path/outside/the/public/docs/.htpasswd myusername</code></pre></figure></p> </div> </article> <article class=post> <h1 class=title><a href="/2011/08/getting-rid-of-cpanel-ip-check-errors/">Getting rid of cPanel IP Check errors</a></h1> <div class=meta> <span><img src="/assests/images/date.png" title=Date alt=Date />23 Aug 2011</span> <span><img src="/assests/images/comments.png" title=Content alt=Content /><a href="/2011/08/getting-rid-of-cpanel-ip-check-errors/#disqus_thread">Comments</a></span> <ul class=categories> <li><a href='/tag/cpanel'>Cpanel</a></li><li><a href='/tag/knowledge-base'>Knowledge base</a></li><li><a href='/tag/linux'>Linux</a></li><li><a href='/tag/software'>Software</a></li><li><a href='/tag/error'>Error</a></li><li><a href='/tag/ipcheck'>Ipcheck</a></li></ul> </div> <div class=entry> <p>On Linux servers behind NAT you will start getting emails warning that the DNS setup is broken.</p> <p>cPanel states that the panel does not work behind NAT and the boxes need <strong>public</strong> ip addresses.</p> <p>It seems that apart from this warning the panel and services function fine behind NAT (as expected) and while I wouldn't recommend it, sometimes you have no choice.</p> <p>The email you get though is something like the following:</p> <p><figure class=highlight><pre><code class="language-text" data-lang="text">[ipcheck] Problem with DNS setup on myserver.local</p>

<p>IMPORTANT: Do not ignore this email.</p>

<p>The hostname (myserver.local) resolves to 10.0.0.1. It should resolve to 192.168.0.1.
Please be sure to correct /etc/hosts as well as the &#39;A&#39; entry in zone file for the domain.</p>

<p>Some are all of these problems can be caused by /etc/resolv.conf being setup incorrectly.
Please check this file if you believe everything else is correct.</code></pre></figure></p> <p>The best way I find of "fixing" this is to just disable the "Ip address dns check" option in the contact manager.</p> <p>You could alternatively comment out the check in /scripts/maintenance, however this will be lost in updates.</p> </div> </article> <article class=post> <h1 class=title><a href="/2011/08/force-pecl-to-install-64bit-modules/">Force PECL to install 64bit modules</a></h1> <div class=meta> <span><img src="/assests/images/date.png" title=Date alt=Date />23 Aug 2011</span> <span><img src="/assests/images/comments.png" title=Content alt=Content /><a href="/2011/08/force-pecl-to-install-64bit-modules/#disqus_thread">Comments</a></span> <ul class=categories> <li><a href='/tag/knowledge-base'>Knowledge base</a></li><li><a href='/tag/linux'>Linux</a></li><li><a href='/tag/php'>Php</a></li><li><a href='/tag/pecl'>Pecl</a></li><li><a href='/tag/php'>Php</a></li><li><a href='/tag/x64'>X64</a></li></ul> </div> <div class=entry> <p>To ensure PECL installs 64bit modules you need to install the 64bit php-devel package.</p> <p>On a RHEL system perform the following:</p> <ol> <li>pecl uninstall</li> <li>yum remove php-devel.i386</li> <li>yum install php-devel.x86_64</li> <li>pecl install</li> </ol> <p>Any further modules will now be 64bit.</p> </div> </article> <article class=post> <h1 class=title><a href="/2011/08/fixing-iptables-for-passive-ftp/">Fixing iptables for passive FTP</a></h1> <div class=meta> <span><img src="/assests/images/date.png" title=Date alt=Date />23 Aug 2011</span> <span><img src="/assests/images/comments.png" title=Content alt=Content /><a href="/2011/08/fixing-iptables-for-passive-ftp/#disqus_thread">Comments</a></span> <ul class=categories> <li><a href='/tag/knowledge-base'>Knowledge base</a></li><li><a href='/tag/linux'>Linux</a></li><li><a href='/tag/firewall'>Firewall</a></li><li><a href='/tag/ftp'>Ftp</a></li><li><a href='/tag/iptables'>Iptables</a></li><li><a href='/tag/passive-ftp'>Passive ftp</a></li></ul> </div> <div class=entry> <p>To make passive FTP work with iptables you need to enable the "ip_conntrack_ftp" module. This is done by editing the /etc/sysconfig/iptables-config and changing</p> <p><figure class=highlight><pre><code class="language-text" data-lang="text">IPTABLES_MODULES=&quot;&quot;</code></pre></figure></p> <p>To include the ip_conntrack_ftp module, like so:</p> <p><figure class=highlight><pre><code class="language-text" data-lang="text">IPTABLES_MODULES=&quot;ip_conntrack_ftp&quot;</code></pre></figure></p> <p>Once this is done, restart iptables and it should play nicely with passive FTP.</p> </div> </article> <nav id=page_nav> <a href="/4/" class=prev>&laquo; Previous Page</a> <a href="/6/" class=next>Next Page &raquo;</a> </nav> </div> <footer class=footer> <div class=container> <p class=text-muted>Copyright 2009-2015 <a href="http://damianzaremba.co.uk">Damian Zaremba</a></p> <ul id=ads> <li>Need error logging? Try <a href="https://getsentry.com/signup/r_D0ZW/">Sentry</a></li> <li>Need cloud instances? Jump on <a href="http://www.bigv.io">BigV</a></li> <li>Want my website? <a href="https://github.com/DamianZaremba/damianzaremba.co.uk/">Source</a></li> </ul> </div> </footer> <script src="/assests/js/jquery.min.js?v1"></script> <script src="/assests/js/bootstrap.min.js?v1"></script> <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(["_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"]);_gaq.push(["_setAccount","UA-11817192-1"]);_gaq.push(["_setDomainName","damianzaremba.co.uk"]);_gaq.push(["_trackPageview"]);(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src="//stats.g.doubleclick.net/dc.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})();(function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src="//damianzaremba.disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script> <!--[if lt IE 9]><script src="/assests/js/html5shiv.min.js?v1"></script> <script src="/assests/js/respond.min.js?v1"></script><![endif]--> </body> </html>
<!DOCTYPE html> <html lang=en> <head> <title>Damian Zaremba - Blog</title> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta http-equiv=Content-Type content="text/html; charset=UTF-8"/> <meta name=description content="Damian Zaremba's Blog"/> <meta name=google-site-verification content=qykIg-4DghoGe78ET4eRjKG1cx6n3gXvu4jF0FvcwRo /> <meta name=author content="Damian Zaremba"/> <link rel=alternate type="application/rss+xml" title="Damian Zaremba's Blog" href="http://feeds.feedburner.com/DamianZaremba"/> <meta name=robots content=INDEX /> <meta name=robots content=FOLLOW /> <meta name=robots content="INDEX,FOLLOW"/> <link href="/assests/css/bootstrap.min.css?_v=58a49b3689d699cb72ffda7252d99fcb" rel=stylesheet> <link href="/assests/css/main.css?_v=628744fb77a1130b2b8d63e77a95b03a" rel=stylesheet> </head> <body> <nav class="navbar navbar-default navbar-fixed-top"> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target="#navbar" aria-expanded=false aria-controls=navbar> <span class=sr-only>Open navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href="/">Damian Zaremba</a> </div> <div id=navbar> <div class="collapse navbar-collapse"> <ul class="nav navbar-nav"> <li class=active><a href="/">Blog</a></li> <li class=""><a href="/about/">About</a></li> <li class=""><a href="/cv/">CV</a></li> <li class=""><a href="/archive/">Archive</a></li> <li class=""><a href="/projects/">Projects</a></li> <li class=""><a href="/todo/">Todo</a></li> </ul> <div class="social-icons navbar-right"> <a href="http://twitter.com/DamianZaremba"> <img class=twitter src="/assests/images/twitter.png?_v=5c9d07bd2ff1f5224934583b6be57b0a" alt=Twitter /> </a> <a href="https://github.com/DamianZaremba"> <img class=github src="/assests/images/github.png?_v=438c17272c5f0e9f4a6da34d3e4bc5bd" alt=GitHub /> </a> <a href="http://feeds.feedburner.com/DamianZaremba"> <img class=rss src="/assests/images/rss.png?_v=f6fa89d6cfe5f5e95f0f87205d8c4b11" alt=RSS /> </a> </div> </div> </div> </div> </nav> <div class=container> <article class=post> <h1 class=title><a href="/2012/08/radius-authentication-on-a-dell-powerconnect-m6220-switch/">RADIUS authentication on a Dell PowerConnect M6220 switch</a></h1> <div class=meta> <span><img src="/assests/images/date.png?_v=1673aede74ad16063dfcd243a3d61d41" title=Date alt=Date />20 Aug 2012</span> <span><img src="/assests/images/comments.png?_v=33159642eac6a274ec5483d1bc54f52c" title=Content alt=Content /><a href="/2012/08/radius-authentication-on-a-dell-powerconnect-m6220-switch/#disqus_thread">Comments</a></span> <ul class=categories> <li><a href='/tag/how-to'>How-to</a></li><li><a href='/tag/software'>Software</a></li><li><a href='/tag/work'>Work</a></li><li><a href='/tag/authentication'>Authentication</a></li><li><a href='/tag/dell'>Dell</a></li><li><a href='/tag/network'>Network</a></li><li><a href='/tag/radius'>Radius</a></li><li><a href='/tag/switch'>Switch</a></li></ul> </div> <div class=entry> <p>A while back I posted the 'how-to' on setting up HP switches for RADIUS authentication (<a href="/2012/04/radius-authentication-on-a-hp-gbe2c-l2-l3-blade-switch/">here</a> for GbE2c L2/L3 switches and <a href="/2012/04/radius-authentication-on-a-hp-procurve-switch/">here</a> for ProCurve switches).</p> <p>I also had to setup some Dell PowerConnect M6220 switches; these proved to be slightly more complicated than the HP's, but followed the Cisco style config.</p> <p>First we need add a custom login and enable method</p> <pre><code class="text">aaa authentication login "LineName" radius local
aaa authentication enable "LineName" none
</code></pre> <p>These are used for connections over SSH - "LineName" can be anything, I tend to use the company name to keep things standard.</p> <p>On the second line, you could also use radius local - this would require a password to enter enable mode. Personally I control the login mode from the RADIUS server and find having to enter a password to get to enable again a hassle.</p> <p>Next we need to setup the RADIUS server</p> <pre><code class="text">radius-server host auth serverIpHere
name "server1"
usage login
key "SecretKeyHere"
exit
</code></pre> <p>Now we just need to configure the ssh line to use our aaa methods</p> <pre><code class="text">login authentication LineName
enable authentication LineName
</code></pre> <p>Once complete you should be able to login via ssh using your RADIUS details.</p> <p>If you require access to the switch over http(s) you can also configure the HTTP server to authenticate against RADIUS</p> <pre><code class="text">ip http authentication radius local
ip https authentication radius local
</code></pre> <p>We include local on every method to ensure we don't get locked out the switch.</p> </div> </article> <article class=post> <h1 class=title><a href="/2012/04/radius-authentication-on-a-hp-procurve-switch/">RADIUS authentication on a HP ProCurve switch</a></h1> <div class=meta> <span><img src="/assests/images/date.png?_v=1673aede74ad16063dfcd243a3d61d41" title=Date alt=Date />01 Apr 2012</span> <span><img src="/assests/images/comments.png?_v=33159642eac6a274ec5483d1bc54f52c" title=Content alt=Content /><a href="/2012/04/radius-authentication-on-a-hp-procurve-switch/#disqus_thread">Comments</a></span> <ul class=categories> <li><a href='/tag/how-to'>How-to</a></li><li><a href='/tag/software'>Software</a></li><li><a href='/tag/work'>Work</a></li><li><a href='/tag/authentication'>Authentication</a></li><li><a href='/tag/hp'>Hp</a></li><li><a href='/tag/network'>Network</a></li><li><a href='/tag/radius'>Radius</a></li><li><a href='/tag/switch'>Switch</a></li></ul> </div> <div class=entry> <p>To configure a HP ProCurve switch for RADIUS authentication you need to use radius-server with the following syntax.</p> <pre><code class="text">radius-server host serverIp key "SecretKeyHere"
</code></pre> <p>Once this is setup you need to configure the switch to authenticate against the radius server.</p> <pre><code class="text">aaa authentication login privilege-mode 
aaa authentication console login radius local 
aaa authentication console enable radius local 
aaa authentication telnet login radius local 
aaa authentication telnet enable radius local 
aaa authentication web login radius local 
aaa authentication ssh login radius local 
aaa authentication ssh enable radius local 
</code></pre> <p>We include the local option so that in the event of the RADIUS server being down we can still authenticate.</p> </div> </article> <article class=post> <h1 class=title><a href="/2012/04/radius-authentication-on-a-hp-gbe2c-l2-l3-blade-switch/">RADIUS authentication on a HP GbE2c L2/L3 Blade Switch</a></h1> <div class=meta> <span><img src="/assests/images/date.png?_v=1673aede74ad16063dfcd243a3d61d41" title=Date alt=Date />01 Apr 2012</span> <span><img src="/assests/images/comments.png?_v=33159642eac6a274ec5483d1bc54f52c" title=Content alt=Content /><a href="/2012/04/radius-authentication-on-a-hp-gbe2c-l2-l3-blade-switch/#disqus_thread">Comments</a></span> <ul class=categories> <li><a href='/tag/how-to'>How-to</a></li><li><a href='/tag/software'>Software</a></li><li><a href='/tag/work'>Work</a></li><li><a href='/tag/authentication'>Authentication</a></li><li><a href='/tag/hp'>Hp</a></li><li><a href='/tag/network'>Network</a></li><li><a href='/tag/radius'>Radius</a></li><li><a href='/tag/switch'>Switch</a></li></ul> </div> <div class=entry> <p>To configure a HP GbE2c L2/L3 Ethernet Blade Switch for RADIUS authentication you need to use radius-server with the following syntax.</p> <pre><code class="text">radius-server primary-host serverIp
radius-server primary-host serverIp key "SecretKeyHere"
radius-server port 1812
radius-server timeout 10
radius-server enable
no radius-server telnet-backdoor
radius-server secure-backdoor
</code></pre> <p>The first and second lines setup the server/key to authenticate against.</p> <p>The third/forth defines the port/timeout for the server we configured in the first lines.</p> <p>The last 3 then enable the server and enable a backdoor so we can authenticate against the switch if the RADIUS server is down.</p> </div> </article> <article class=post> <h1 class=title><a href="/2012/03/sntp-on-a-hp-procurve-switch/">SNTP on a HP ProCurve switch</a></h1> <div class=meta> <span><img src="/assests/images/date.png?_v=1673aede74ad16063dfcd243a3d61d41" title=Date alt=Date />18 Mar 2012</span> <span><img src="/assests/images/comments.png?_v=33159642eac6a274ec5483d1bc54f52c" title=Content alt=Content /><a href="/2012/03/sntp-on-a-hp-procurve-switch/#disqus_thread">Comments</a></span> <ul class=categories> <li><a href='/tag/how-to'>How-to</a></li><li><a href='/tag/hp'>Hp</a></li><li><a href='/tag/network'>Network</a></li><li><a href='/tag/ntp'>Ntp</a></li><li><a href='/tag/sntp'>Sntp</a></li><li><a href='/tag/switch'>Switch</a></li></ul> </div> <div class=entry> <p>Configuring NTP for switches is a rather simple process, however the syntax varies depending on the switch OS.</p> <p>Most switches use SNTP rather than NTP, SNTP is basically NTP but lacks some of the more advanced internal algorithms and is slightly less accurate.</p> <p>To configure a ProCurve you need to use SNTP with the following syntax.</p> <pre><code class="text">sntp server &lt;ip&gt;
sntp unicast
timesync sntp
</code></pre> <p>The first line defines what IP to sync with, the second tells the switch to use unicast UDP rather than TCP and the third tells the switch to sync it's time with the SNTP server.</p> <p>This needs to be done in configure mode which can be got into via enable mode.</p> <pre><code class="text">enable
configure
</code></pre> <p>Once the switch is syncing with the SNTP server you can check the time is correct with</p> <pre><code class="text">show time
</code></pre> <p>Lastly just save the changes then logout</p> <pre><code class="text">write mem
logout
</code></pre> <p>A full example of this is below:</p> <pre><code class="text">Switch&gt; en
Switch# conf
Switch(config)# sntp server 79.142.192.4
Switch(config)# sntp unicast
Switch(config)# timesync sntp
Switch(config)# exit
Switch# write mem
Switch# logout
</code></pre> <p>Your switches should now keep their time in sync :)</p> </div> </article> <article class=post> <h1 class=title><a href="/2012/03/sntp-on-a-hp-gbe2c-l2-l3-blade-switch/">NTP on a HP GbE2c L2/L3 Blade Switch</a></h1> <div class=meta> <span><img src="/assests/images/date.png?_v=1673aede74ad16063dfcd243a3d61d41" title=Date alt=Date />18 Mar 2012</span> <span><img src="/assests/images/comments.png?_v=33159642eac6a274ec5483d1bc54f52c" title=Content alt=Content /><a href="/2012/03/sntp-on-a-hp-gbe2c-l2-l3-blade-switch/#disqus_thread">Comments</a></span> <ul class=categories> <li><a href='/tag/how-to'>How-to</a></li><li><a href='/tag/hp'>Hp</a></li><li><a href='/tag/network'>Network</a></li><li><a href='/tag/ntp'>Ntp</a></li><li><a href='/tag/sntp'>Sntp</a></li><li><a href='/tag/switch'>Switch</a></li></ul> </div> <div class=entry> <p>To configure a HP GbE2c L2/L3 Ethernet Blade Switch for HP c-Class BladeSystem, you need to use NTP with the following syntax.</p> <pre><code class="text">ntp enable 
ntp timezone 0
ntp primary-server &lt;ip&gt;
ntp secondary-server &lt;ip&gt;
</code></pre> <p>The first line enables NTP, the second tells the switch to use GMT+0 and the third/forth tells the switch which servers to sync with.</p> <p>This needs to be done in configure mode which can be got into via enable mode.</p> <pre><code class="text">enable
configure
</code></pre> <p>Now ensure the switch timezone is correct, the command for this is slightly obnoxious. Below is an example of setting it to GB:</p> <pre><code class="text">Switch(config)# system timezone 
Please identify a location so that time zone rules can be set correctly.
Please select a continent or ocean.
 1) Africa
 2) Americas
 3) Antarctica
 4) Arctic Ocean
 5) Asia
 6) Atlantic Ocean
 7) Australia
 8) Europe
 9) Indian Ocean
10) Pacific Ocean
11) None - disable timezone setting
#? 8
Please select a country.
 1) Albania               16) Gibraltar     31) Poland
 2) Andorra               17) Greece        32) Portugal
 3) Austria               18) Hungary       33) Romania
 4) Belarus               19) Ireland       34) Russia
 5) Belgium               20) Italy         35) San Marino
 6) Bosnia &amp; Herzegovina  21) Latvia        36) Slovakia
 7) Britain (UK)          22) Liechtenstein 37) Slovenia
 8) Bulgaria              23) Lithuania     38) Spain
 9) Croatia               24) Luxembourg    39) Sweden
10) Czech Republic        25) Macedonia     40) Switzerland
11) Denmark               26) Malta         41) Turkey
12) Estonia               27) Moldova       42) Ukraine
13) Finland               28) Monaco        43) Vatican City
14) France                29) Netherlands   44) Yugoslavia
15) Germany               30) Norway
#? 7
Please select one of the following time zone regions.
1) Great Britain
2) Northern Ireland
#? 1 
System timezone set to : Europe/Britain/GB
</code></pre> <p>Lastly just save the changes then logout</p> <pre><code class="text">copy run start
logout
</code></pre> <p>A full example of this is below:</p> <pre><code class="text">Switch&gt; en
Switch# conf t
Switch(config)# ntp enable
Switch(config)# ntp timezone 0
Switch(config)# ntp primary-server 79.142.192.4
Switch(config)# ntp secondary-server 217.147.208.1
Switch(config)# exit
Switch# copy run start
Switch# logout
</code></pre> <p>Your switches should now keep their time in sync :)</p> </div> </article> <nav id=page_nav> <a href="/" class=prev>&laquo; Previous Page</a> <a href="/3/" class=next>Next Page &raquo;</a> </nav> </div> <footer class=footer> <div class=container> <p class=text-muted>Copyright 2009-2016 <a href="http://damianzaremba.co.uk">Damian Zaremba</a></p> <ul id=ads> <li>Need error logging? Try <a href="https://getsentry.com/signup/r_D0ZW/">Sentry</a></li> <li>Need cloud instances? Jump on <a href="http://www.bigv.io">BigV</a></li> <li>Want my website? <a href="https://github.com/DamianZaremba/damianzaremba.co.uk/">Source</a></li> </ul> </div> </footer> <script src="/assests/js/jquery.min.js?_v=5790ead7ad3ba27397aedfa3d263b867"></script> <script src="/assests/js/bootstrap.min.js?_v=046ba2b5f4cff7d2eaaa1af55caa9fd8"></script> <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(["_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"]);_gaq.push(["_setAccount","UA-11817192-1"]);_gaq.push(["_setDomainName","damianzaremba.co.uk"]);_gaq.push(["_trackPageview"]);(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src="//stats.g.doubleclick.net/dc.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})();(function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src="//damianzaremba.disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script> <!--[if lt IE 9]><script src="/assests/js/html5shiv.min.js?_v=3044234175ac91f49b03ff999c592b85"></script> <script src="/assests/js/respond.min.js?_v=afc1984a3d17110449dc90cf22de0c27"></script><![endif]--> </body> </html>
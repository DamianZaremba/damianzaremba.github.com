<!DOCTYPE HTML>
<html>
<head>
    <title>Damian Zaremba - KVIrc update breaks Irssi Proxy</title>

    <!-- General meta data -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <meta name="google-site-verification" content="qykIg-4DghoGe78ET4eRjKG1cx6n3gXvu4jF0FvcwRo" />
    <meta name="author" content="Damian Zaremba" />
    <link rel="alternate" type="application/rss+xml" title="Damian Zaremba's Blog" href="http://feeds.feedburner.com/DamianZaremba" />

    <!-- Robot meta data -->
    <meta name="robots" content="INDEX" />
    <meta name="robots" content="FOLLOW" />
    <meta name="robots" content="INDEX,FOLLOW" />

    <!-- CSS files -->
    <link href="/assests/css/main.css" rel="stylesheet" type="text/css" />
    <link href="/assests/css/pygments.css" rel="stylesheet" type="text/css" />

    <!-- JS files -->
    <script src="http://mint.damianzaremba.co.uk/?js" type="text/javascript"></script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-11817192-1']);
        _gaq.push(['_setDomainName', 'damianzaremba.co.uk']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www');
            ga.src += '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>

    <!-- IE fixes -->
    <!--[if IE]>
    body {
        behavior: url("/assests/other/hover.htc");
    }
    <![endif]-->

    <!--
    RIPA NOTICE: No consent is given for the interception of this page transmission
    -->
</head>
<body>
    <header>
        <h1><a href="/">Damian Zaremba</a> <span>KVIrc update breaks Irssi Proxy</span></h1>

        <nav>
            <ul id="main">
               <li><a href="/">Blog</a></li>
               <li><a href="/about">About</a></li>
               <li><a href="/cv">CV</a></li>
               <li><a href="/archives">Archives</a></li>
               <!--
               <li><a href="/study-notes">Study notes</a></li>
               <li><a href="/technical-interview-questions">Interview questions</a></li>
               -->
               <li><a href="/projects">Projects</a></li>
            </ul>
        </nav>

        <div id="right">
            <p>
                <a href="http://twitter.com/DamianZaremba">
                    <img src="/assests/images/twitter.png" alt="Twitter" />
                </a>
                <a href="https://plus.google.com/110559147647328161061">
                    <img src="/assests/images/googleplus.png" alt="GooglePlus" />
                </a>
                <a href="http://facebook.com/DamianZaremba">
                    <img src="/assests/images/facebook.png" alt="Facebook" />
                </a>
                <a href="https://github.com/DamianZaremba">
                    <img src="/assests/images/github.png" alt="GitHub" />
                </a>
                <a href="http://feeds.feedburner.com/DamianZaremba">
                    <img src="/assests/images/rss.png" alt="RSS" />
                </a>
            </p>
            <form class="search" action="http://google.com/search" method="get">
                <input class="left" type="text" name="q">
                <input type="hidden" name="q" value="site:damianzaremba.co.uk">
            </form>
        </div>
</header>

<div id="content">
<article class="post">
    <div class="meta">
        <span><img src="/assests/images/date.png" title="Date" alt="Date" />04 Sep 2012</span>
        <span><img src="/assests/images/comments.png" title="Content" alt="Content" /><a href="/2012/09/kvirc-update-breaks-irssi-proxy/#disqus_thread">Comments</a></span>
        
            <ul class="categories">
            <li><a href='/tag/how-to'>How-to</a></li><li><a href='/tag/software'>Software</a></li><li><a href='/tag/irc'>IRC</a></li><li><a href='/tag/irssi'>Irssi</a></li><li><a href='/tag/kvirc'>KVIrc</a></li></ul>
        
    </div>
    <div class="entry">
        <p>I recently updated KVIrc on OS X from 3.2.0 to 4.2.0.
The update appeared to complete successfully, however on trying to connect to my
Irssi Proxy server nothing appeared to happen.</p>

<p>The output from the server console was something like below</p>

<div class="highlight"><pre><code class="text">This is the first connection in this IRC context: using the global server
setting
Attempting connection to myirssiproxy.local (RawrIRC) on port 8000
Looking up the server hostname (myirssiproxy.local)...
Server hostname resolved to 10.44.1.1
Contacting IRC server myirssiproxy.local (10.44.1.1) on port 8000
Connection established [myirssiproxy.local (10.44.1.1:8000)]
Local host address is 10.44.1.2
</code></pre></div>


<p>It turns out that in 4.2.0 the servers automatically had 'Switch to SSL/TLS by
using the STARTTLS extension' enabled.</p>

<p>Unfortunately Irssi Proxy doesn't like STARTTLS, so while the logs show
successful connections no data is transferred over the socket.</p>

<p>The simple solution to get things back up and running properly is to disable the
option under each server.</p>

<p>To do this browse to 'Configure servers' under Settings, double click on the
server under the network, tab over to Advanced and disable 'Switch to SSL/TLS by
using the STARTTLS extension'.</p>

<p>If you have a large number of servers you can also directly edit the ini file
under ~/.config/KVIrc/config/serverdb.kvc. In this file each network is a
section and each server is numbered.</p>

<p>To disabled STARTTLS for the first server in network A, your config should look
something like the below</p>

<div class="highlight"><pre><code class="ini"><span class="k">[A]</span>
<span class="na">0_EnabledSTARTTLS</span><span class="o">=</span><span class="s">false</span>
</code></pre></div>


<p>This will usually have a number of other items, a full example is below</p>

<div class="highlight"><pre><code class="ini"><span class="k">[FreeNode]</span>
<span class="na">0_Port</span><span class="o">=</span><span class="s">8000</span>
<span class="na">0_Hostname</span><span class="o">=</span><span class="s">myirssiproxy.local</span>
<span class="na">0_Ip</span><span class="o">=</span><span class="s">10.44.1.1</span>
<span class="na">0_Nick</span><span class="o">=</span><span class="s">MyNick</span>
<span class="na">NServers</span><span class="o">=</span><span class="s">1</span>
<span class="na">RealName</span><span class="o">=</span><span class="s">MyName</span>
<span class="na">0_Pass</span><span class="o">=</span><span class="s">Mypass</span>
<span class="na">0_AutoConnect</span><span class="o">=</span><span class="s">true</span>
<span class="na">0_EnabledSTARTTLS</span><span class="o">=</span><span class="s">false</span>
<span class="na">NickName</span><span class="o">=</span><span class="s">MyNick</span>
<span class="na">0_Id</span><span class="o">=</span><span class="s">Server1</span>
<span class="na">0_EnabledCAP</span><span class="o">=</span><span class="s">false</span>
<span class="na">0_RealName</span><span class="o">=</span><span class="s">MyName</span>
<span class="na">0_User</span><span class="o">=</span><span class="s">MyUser</span>
<span class="na">UserName</span><span class="o">=</span><span class="s">Damian</span>
</code></pre></div>


<p>This also makes it quite easy to generally manage servers in KVIrc, outside of wide
scale settings changes.</p>

    </div>
</article>


<section id="related">
    <h2>Related posts</h2>
    <ul id="related_posts">
    
        <li>&raquo; <a href="/2013/01/what-is-anycast-and-why-would-i-use-it/">What's Anycast and why would I use it?</a></li>
    
        <li>&raquo; <a href="/2010/07/virt-install-is-a-life-server/">virt-install is a life server</a></li>
    
        <li>&raquo; <a href="/2011/06/configuring-a-cisco-1700-series-access-router-for-an-adsl-connection-with-tunneled-ipv6/">Configuring a Cisco 1700 series access router for an ADSL connection with tunneled IPv6</a></li>
    
    </ul>
</section>



<section id="comment">
    <h2>Comments</h2>
    <div id="disqus_thread" aria-live="polite">
        <noscript>Please enable JavaScript to view the comments</noscript>
    </div>
</section>

<script type="text/javascript">
    var disqus_shortname = 'damianzaremba';
    var disqus_identifier = 'http://damianzaremba.co.uk/2012/09/kvirc-update-breaks-irssi-proxy/';
    var disqus_url = 'http://damianzaremba.co.uk/2012/09/kvirc-update-breaks-irssi-proxy/';
    var disqus_script = 'embed.js';

    (function () {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


</div>

<footer>
    <p class="copyright">Copyright 2009-2014 <a href="http://damianzaremba.co.uk">Damian Zaremba</a></p>
    <ul id="ads">
        <li>Need error logging? Try <a href="https://getsentry.com/signup/r_D0ZW/">Sentry</a></li>
        <li>Need cloud instances? Jump on <a href="http://www.bigv.io">BigV</a></li>
        <li>Want my website? <a href="https://github.com/DamianZaremba/damianzaremba.co.uk/">Source</a></li>
    </ul>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<!--[if lt IE 9]>
<script src="/assests/js/html5.js"></script>
<![endif]-->

<script type="text/javascript">
    !window.jQuery && document.write(unescape('%3Cscript src="/assests/js/jquery.js"%3E%3C/script%3E'))

    var disqus_shortname = 'damianzaremba';
    var disqus_script = 'count.js';

    (function () {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>
</body>
</html>
